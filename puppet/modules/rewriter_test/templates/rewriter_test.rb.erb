require 'open-uri'
require 'rubygems'
require 'minitest/autorun'


LANGUAGES = %w(de en fr pl nl)
describe "testing" do

  def app_response(url)
    r = `curl -s '#{url}'`
    #r = open("http://#{url}").read
    r.gsub!("http://", '')
    remove_port(r)
  end

  def remove_port(url)
    url.gsub(/\:9292/, '')
  end

  it "works" do
    (1+1).must_equal 2
  end

  describe "lang" do

    LANGUAGES.each do |lng|
      it "passes language #{lng} through" do
        app_response("#{lng}.dawanda.com").must_equal "#{lng}.dawanda.com/"
      end
    end

  end
end
